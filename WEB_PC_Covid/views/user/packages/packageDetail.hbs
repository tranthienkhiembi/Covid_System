<link rel="stylesheet" href="/assets/css/tooplate-main.css">
<link rel="stylesheet" href="/assets/css/flex-slider.css">

<div id="content">
    <!-- Single Starts Here -->
    <div class="single-product" style="margin-top: -80px;">
        <div class="container">
            {{#each this.Package}}
            <div class="row">
                <div class="col-md-12">
                    <div class="section-heading">
                        <div class="line-dec"></div>
                        <h1>Details package of necessities</h1>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="product-slider">
                        <div class="card h-100 mx-auto mb-2 edit-card" style="width: 23rem;">
                            <div id="carousel{{Id}}" class="carousel slide card-img-top" data-bs-ride="carousel">
                                <div class="carousel-inner">
                                    <div class="carousel-item w-100 active">
                                        <img src="https://www.havamall.com/wp-content/uploads/2021/08/6495433dcd533b0d6242.jpg" class="d-block w-100 edit-image" alt="...">
                                    </div>
                                    <div class="carousel-item w-100">
                                        <img src="https://product.hstatic.net/200000360759/product/upload_e1ab6217ece54a4c8854bd199341ff5f_master.jpg" class="d-block w-100 edit-image" alt="...">
                                    </div>
                                </div>
                                <button class="carousel-control-prev" type="button" data-bs-target="#carousel{{Id}}"
                                    data-bs-slide="prev">
                                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                    <span class="visually-hidden"></span>
                                </button>
                                <button class="carousel-control-next" type="button" data-bs-target="#carousel{{Id}}"
                                    data-bs-slide="next">
                                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                    <span class="visually-hidden"></span>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="row right-content" style="margin-top: 50px">
                        <span>
                            <h3>Description: </h3>
                        </span>
                        <span style="font-style: italic;">{{introduce}}</span>
                    </div>
                </div>

                <div class="col-md-6">
                    <form>
                        <div class="right-content" id="{{Id}}" name="{{Id}}">
                            <h2>{{NamePackage}}</h2>
                            <h6>Element: </h6>
                            <ul style="list-style-type: none;">
                                {{#each ../this.product}}
                                <li>
                                    <input type="checkbox" name="options[]" value="{{IdProduct}}" checked>
                                    <label class="text-capitalize"> {{NameProduct}}</label><br>
                                </li>
                                {{/each}}
                            </ul>

                            <div style="margin-top: 0px">
                                <span>packets available </span>
                            </div>

                            <label for="quantity">Quantity:</label>
                            <input name="quantity" type="quantity" class="quantity-text quantity" id="quantity"
                                value="{{quantity}}">
                            <button type="submit" class="btn btn-info" formmethod="post" style="margin-right: 50px;"
                                data-bs-toggle="modal" data-bs-target="#exampleBuy" data-target="#exampleBuy"
                                formaction="/user/buyPackages/quantity">Buy</button>
                        </div>
                        <div class="checkQuantity"></div>
                    </form>
                    <div class="down-content">
                    </div>
                </div>
            </div>
            {{/each}}
        </div>

        <div class="row">
            <div class="col-md-6">
            </div>
            <div class="col-md-6">
                {{#if msg}}
                <div class="alert alert-danger d-flex align-items-center mt-1 alert-dismissible" role="alert">
                    <i class="fas fa-exclamation-triangle"></i>
                    <div>{{msg}}</div>
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
                {{/if}}
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="exampleBuy" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Payments</h4>
            </div>
            <form align="center">
                <div class="modal-body">
                    {{!-- <span>
                        <h5>Số tiền cần thanh toán cho hóa đơn này: {{totalPrice}} VNĐ</h5>
                    </span> --}}
                    <button type="submit" class="btn btn-info" formmethod="post" style="margin-right: 50px;"
                        formaction="/user/buyPackages/paynow">Pay now</button>

                    <button type="submit" class="btn btn-info" formmethod="post"
                        formaction="/user/buyPackages/paylater">Pay later</button>
                </div>
                <div class="modal-footer">
                </div>
            </form>
        </div>
    </div>
</div>
</div>

{{#section 'css'}}
<link rel="stylesheet" href="//code.jquery.com/ui/1.13.0/themes/base/jquery-ui.css">
<!-- Bootstrap CSS CDN -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
<!-- Our Custom CSS -->
<link rel="stylesheet" href="/assets/css/navBar.css">
<link href='https://fonts.googleapis.com/css?family=Mulish' rel='stylesheet'>
<!-- Font Awesome JS -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
{{/section}}

{{#section 'nav'}}
{{> navbarUser }}
{{/section}}

{{#section 'script'}}
<!-- Popper.JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.js"></script>
<script>
    $(document).ready(() => {
        // thêm class active vào phần tử đầu tiên của ảnh
        $(".carousel-item:nth-child(1)").addClass("active");
    });
    var checkName = 1;
    $('.quantity').keyup(function () {
        if ($(this).val().length != 0) {
            checkName = 1;
            $('.checkQuantity').html('');
        }
        else {
            checkName = 0;
            alert('Vui lòng điền số lượng sản phẩm trong gói sản phẩm!', 'danger', 'Quantity');
            $('.btn-edit').prop('disabled', true);
        }
    });

    function alert(message, type, element) {
        $(`.check${element}`).html('<div class="alert alert-' + type + ' d-flex align-items-center mt-1 alert-dismissible" role="alert"> <i class="fas fa-exclamation-triangle"></i> <div>' + message + '</div><button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button></div>');
    }
</script>
{{/section}}